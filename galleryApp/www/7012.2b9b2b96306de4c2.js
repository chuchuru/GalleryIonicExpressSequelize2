"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7012],{7012:(x,p,s)=>{s.r(p),s.d(p,{MyPicturesPageModule:()=>y});var g=s(177),d=s(4341),i=s(4742),m=s(8986),f=s(467),e=s(4438),h=s(6748);function P(n,a){if(1&n){const c=e.RV6();e.j41(0,"ion-card",11),e.nrm(1,"img",12),e.j41(2,"ion-card-header")(3,"ion-card-subtitle",13),e.EFF(4,"Nombre de la Obra"),e.k0s(),e.j41(5,"ion-card-title",14),e.EFF(6),e.k0s()(),e.j41(7,"ion-card-content")(8,"p",15),e.EFF(9),e.k0s()(),e.j41(10,"ion-footer",16)(11,"ion-grid")(12,"ion-row")(13,"ion-col"),e.nrm(14,"ion-icon",17),e.j41(15,"div",18),e.EFF(16),e.k0s()(),e.j41(17,"ion-col",19),e.nrm(18,"ion-icon",20),e.j41(19,"div"),e.nrm(20,"ion-icon",21),e.k0s()(),e.j41(21,"ion-col"),e.nrm(22,"ion-icon",22),e.j41(23,"div",23),e.EFF(24),e.k0s()()()()(),e.j41(25,"ion-button",24),e.bIt("click",function(){const t=e.eBV(c).$implicit,o=e.XpG();return e.Njj(o.editPicture(t.id))}),e.nrm(26,"ion-icon",25),e.k0s()()}if(2&n){const c=a.$implicit;e.R7$(),e.FS9("alt",c.name),e.Y8G("src",c.filename,e.B4B),e.R7$(5),e.JRh(c.name),e.R7$(3),e.JRh(c.description),e.R7$(7),e.JRh(c.revalue),e.R7$(4),e.FS9("name",c.certified?"thumbs-up":"thumbs-down"),e.R7$(4),e.SpI("",c.price,"\u20ac")}}const b=[{path:"",component:(()=>{var n;class a{constructor(r,t,o,u){this.pictureService=r,this.alertController=t,this.formBuilder=o,this.router=u,this.pictures=[],this.filteredPictures=[],this.searchTerm=""}ngOnInit(){this.getAllPictures()}getAllPictures(){this.pictureService.getPictures().subscribe(r=>{this.pictures=r.map(t=>({...t,filename:`http://localhost:8080/${t.filename}`})),this.filteredPictures=this.pictures,console.log("Pictures retrieved",this.pictures)},r=>{console.error("Error fetching pictures:",r)})}filterPictures(){this.filteredPictures=this.searchTerm?this.pictures.filter(r=>r.name.toLowerCase().includes(this.searchTerm.toLowerCase())):this.pictures}editPicture(r){var t=this;return(0,f.A)(function*(){if(void 0===r)return void console.error("El ID de la pintura no es v\xe1lido");const o=t.pictures.find(l=>l.id===r);o&&(yield(yield t.alertController.create({header:"Modificar Obra de Arte",inputs:[{name:"name",type:"text",value:o.name,placeholder:"Nombre de la obra"},{name:"description",type:"text",value:o.description,placeholder:"Descripci\xf3n"},{name:"revalue",type:"text",value:o.revalue,placeholder:"Revalorizaci\xf3n"},{name:"price",type:"text",value:o.price,placeholder:"Precio"},{name:"filename",type:"text",value:o.filename,placeholder:"Archivo de imagen"},{name:"certified",type:"checkbox",label:"Certificada",checked:o.certified}],buttons:[{text:"Cancelar",role:"cancel"},{text:"Guardar",handler:l=>{const v={...o,name:l.name,description:l.description,revalue:l.revalue,price:l.price,filename:l.filename,certified:l.certified};t.pictureService.updatePicture(Number(r),v).subscribe(()=>{t.getAllPictures()},C=>{console.error("Error al actualizar la pintura",C)})}}]})).present())})()}presentConfirmEdit(){var r=this;return(0,f.A)(function*(){const t=yield r.alertController.create({header:"Confirmar Modificaci\xf3n",message:"\xbfEst\xe1s seguro de que deseas guardar los cambios?",buttons:[{text:"Cancelar",role:"cancel",handler:()=>(console.log("Modificaci\xf3n cancelada"),!1)},{text:"Confirmar",handler:()=>(console.log("Modificaci\xf3n confirmada"),!0)}]});return yield t.present(),new Promise(o=>{t.onDidDismiss().then(()=>{o("confirm"===t.role)})})})()}deletePicture(r){this.pictureService.deletePicture(r).subscribe(t=>{console.log("Pintura eliminada:",t),this.getAllPictures()},t=>{console.error("Error eliminando pintura:",t)})}goToAddPicture(){this.router.navigate(["/add-picture"])}}return(n=a).\u0275fac=function(r){return new(r||n)(e.rXU(h.S),e.rXU(i.hG),e.rXU(d.ok),e.rXU(m.Ix))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-my-pictures"]],decls:13,vars:3,consts:[[3,"translucent"],["color","primary"],[2,"color","white"],["placeholder","Buscar...","showCancelButton","focus",3,"ngModelChange","ionInput","ngModel"],["class","custom-card",4,"ngFor","ngForOf"],[1,"fab-container"],["slot","fixed","vertical","bottom","horizontal","start"],[3,"click"],["name","add","color","light"],["color","tertiary","routerLink","/home",1,"fab-button-right"],["name","home-outline"],[1,"custom-card"],[1,"card-image",3,"src","alt"],[1,"card-subtitle"],["size","large",1,"card-title"],[1,"card-description"],[1,"custom-card-footer"],["name","bar-chart-outline",1,"icon"],[1,"revalue"],[1,"text-center"],["name","ribbon-outline",1,"icon"],[1,"icon",3,"name"],["name","pricetag-outline",1,"icon"],[1,"price"],["fill","clear","color","primary",3,"click"],["slot","icon-only","name","create-outline"]],template:function(r,t){1&r&&(e.j41(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-title",2),e.EFF(3,"Obras de Arte"),e.k0s()()(),e.j41(4,"ion-content")(5,"ion-searchbar",3),e.mxI("ngModelChange",function(u){return e.DH7(t.searchTerm,u)||(t.searchTerm=u),u}),e.bIt("ionInput",function(){return t.filterPictures()}),e.k0s(),e.DNE(6,P,27,7,"ion-card",4),e.j41(7,"div",5)(8,"ion-fab",6)(9,"ion-fab-button",7),e.bIt("click",function(){return t.goToAddPicture()}),e.nrm(10,"ion-icon",8),e.k0s()(),e.j41(11,"ion-fab-button",9),e.nrm(12,"ion-icon",10),e.k0s()()()),2&r&&(e.Y8G("translucent",!0),e.R7$(5),e.R50("ngModel",t.searchTerm),e.R7$(),e.Y8G("ngForOf",t.filteredPictures))},dependencies:[g.Sq,d.BC,d.vS,i.Jm,i.b_,i.I9,i.ME,i.HW,i.tN,i.hU,i.W9,i.Q8,i.YW,i.M0,i.lO,i.eU,i.iq,i.ln,i.S1,i.BC,i.ai,i.Gw,i.N7,m.Wk],styles:['@charset "UTF-8";.custom-card[_ngcontent-%COMP%]{border-radius:12px;overflow:hidden;box-shadow:0 4px 8px #0000001a;margin-bottom:20px}.card-image[_ngcontent-%COMP%]{width:100%;height:auto;border-top-left-radius:12px;border-top-right-radius:12px}.card-subtitle[_ngcontent-%COMP%], .card-title[_ngcontent-%COMP%]{color:#6a0dad}.card-description[_ngcontent-%COMP%]{font-size:.9em;color:#555}.custom-card-footer[_ngcontent-%COMP%]{background-color:#f9f9f9;padding:12px;border-top:1px solid #ddd;margin-top:10px}.icon[_ngcontent-%COMP%]{font-size:2em;color:#6a0dad}.revalue[_ngcontent-%COMP%], .price[_ngcontent-%COMP%]{font-size:1.2em;color:#333}.action-button[_ngcontent-%COMP%]{margin-top:10px}.fab-container[_ngcontent-%COMP%]{position:absolute;bottom:20px;left:0;right:0;display:flex;justify-content:space-between;padding:0 20px;z-index:1000}.fab-button-left[_ngcontent-%COMP%], .fab-button-right[_ngcontent-%COMP%]{position:relative;border-radius:50%;box-shadow:0 4px 10px #0003}.fab-button-left[_ngcontent-%COMP%]{margin-left:0}.fab-button-right[_ngcontent-%COMP%]{margin-right:0}ion-fab-button[_ngcontent-%COMP%]:hover{background-color:#54268f}']}),a})()}];let M=(()=>{var n;class a{}return(n=a).\u0275fac=function(r){return new(r||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[m.iI.forChild(b),m.iI]}),a})(),y=(()=>{var n;class a{}return(n=a).\u0275fac=function(r){return new(r||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[g.MD,d.YN,i.bv,M]}),a})()}}]);