"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[669],{669:(b,m,a)=>{a.r(m),a.d(m,{AddPicturesPageModule:()=>P});var f=a(177),n=a(4341),o=a(4742),d=a(8986),p=a(467),e=a(4438),F=a(6748);const g=[{path:"",component:(()=>{var i;class l{constructor(r,t,s,u){this.fb=r,this.pictureService=t,this.router=s,this.alertController=u,this.selectedFile=null,this.pictureForm=this.fb.group({name:["",n.k0.required],description:[""],price:["",n.k0.required],revalue:["",[n.k0.required,n.k0.min(0)]],certified:[!1,n.k0.required],artistId:["",n.k0.required],galleryId:["",n.k0.required]})}onFileSelected(r){const t=r.target;t.files&&t.files[0]&&(this.selectedFile=t.files[0],console.log("Archivo seleccionado:",this.selectedFile.name))}onSubmit(){var r=this;return(0,p.A)(function*(){if(r.pictureForm.invalid)return void(yield(yield r.alertController.create({header:"Error",message:"Por favor, completa todos los campos obligatorios.",buttons:["OK"]})).present());const t=new FormData;t.append("name",r.pictureForm.value.name),t.append("description",r.pictureForm.value.description),t.append("price",r.pictureForm.value.price),t.append("revalue",r.pictureForm.value.revalue),t.append("certified",r.pictureForm.value.certified.toString()),t.append("artistId",r.pictureForm.value.artistId),t.append("galleryId",r.pictureForm.value.galleryId),r.selectedFile&&t.append("file",r.selectedFile,r.selectedFile.name),r.pictureService.uploadPicture(t).subscribe(function(){var s=(0,p.A)(function*(u){yield(yield r.alertController.create({header:"\xc9xito",message:"La imagen se ha a\xf1adido correctamente.",buttons:["OK"]})).present(),r.router.navigate(["/pictures"])});return function(u){return s.apply(this,arguments)}}(),function(){var s=(0,p.A)(function*(u){console.error("Error al a\xf1adir la imagen:",u),yield(yield r.alertController.create({header:"Error",message:"Hubo un problema al a\xf1adir la imagen. Int\xe9ntalo de nuevo.",buttons:["OK"]})).present()});return function(u){return s.apply(this,arguments)}}())})()}}return(i=l).\u0275fac=function(r){return new(r||i)(e.rXU(n.ok),e.rXU(F.S),e.rXU(d.Ix),e.rXU(o.hG))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-add-pictures"]],decls:45,vars:4,consts:[["slot","end"],[3,"click","disabled"],[3,"formGroup"],["position","stacked"],["formControlName","name","type","text","placeholder","Ejemplo: Paisaje nocturno"],["formControlName","description","placeholder","Breve descripci\xf3n de la imagen"],["formControlName","price","type","number","placeholder","Ejemplo: 100.50"],["formControlName","revalue","type","number","placeholder","Ejemplo: 10"],["formControlName","certified","placeholder","Selecciona"],[3,"value"],["formControlName","artistId","type","text","placeholder","Ejemplo: ART123"],["formControlName","galleryId","type","text","placeholder","Ejemplo: GAL456"],["type","file","accept","image/*",3,"change"]],template:function(r,t){1&r&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"A\xf1adir Imagen"),e.k0s(),e.j41(4,"ion-buttons",0)(5,"ion-button",1),e.bIt("click",function(){return t.onSubmit()}),e.EFF(6,"Guardar"),e.k0s()()()(),e.j41(7,"ion-content")(8,"form",2)(9,"ion-item")(10,"ion-label",3),e.EFF(11,"Nombre"),e.k0s(),e.nrm(12,"ion-input",4),e.k0s(),e.j41(13,"ion-item")(14,"ion-label",3),e.EFF(15,"Descripci\xf3n"),e.k0s(),e.nrm(16,"ion-textarea",5),e.k0s(),e.j41(17,"ion-item")(18,"ion-label",3),e.EFF(19,"Precio"),e.k0s(),e.nrm(20,"ion-input",6),e.k0s(),e.j41(21,"ion-item")(22,"ion-label",3),e.EFF(23,"Revalorizaci\xf3n (%)"),e.k0s(),e.nrm(24,"ion-input",7),e.k0s(),e.j41(25,"ion-item")(26,"ion-label",3),e.EFF(27,"\xbfCertificado?"),e.k0s(),e.j41(28,"ion-select",8)(29,"ion-select-option",9),e.EFF(30,"S\xed"),e.k0s(),e.j41(31,"ion-select-option",9),e.EFF(32,"No"),e.k0s()()(),e.j41(33,"ion-item")(34,"ion-label",3),e.EFF(35,"ID del Artista"),e.k0s(),e.nrm(36,"ion-input",10),e.k0s(),e.j41(37,"ion-item")(38,"ion-label",3),e.EFF(39,"ID de la Galer\xeda"),e.k0s(),e.nrm(40,"ion-input",11),e.k0s(),e.j41(41,"ion-item")(42,"ion-label",3),e.EFF(43,"Archivo de Imagen"),e.k0s(),e.j41(44,"input",12),e.bIt("change",function(u){return t.onFileSelected(u)}),e.k0s()()()()),2&r&&(e.R7$(5),e.Y8G("disabled",!t.pictureForm.valid),e.R7$(3),e.Y8G("formGroup",t.pictureForm),e.R7$(21),e.Y8G("value",!0),e.R7$(2),e.Y8G("value",!1))},dependencies:[n.qT,n.BC,n.cb,n.j4,n.JD,o.Jm,o.QW,o.W9,o.eU,o.$w,o.uz,o.he,o.Nm,o.Ip,o.nc,o.BC,o.ai,o.su,o.Je,o.Gw]}),l})()}];let v=(()=>{var i;class l{}return(i=l).\u0275fac=function(r){return new(r||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[d.iI.forChild(g),d.iI]}),l})(),P=(()=>{var i;class l{}return(i=l).\u0275fac=function(r){return new(r||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[f.MD,n.YN,n.X1,o.bv,v]}),l})()}}]);